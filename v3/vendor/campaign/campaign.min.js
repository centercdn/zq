!function(t){var n={};function e(i){if(n[i])return n[i].exports;var a=n[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,e),a.l=!0,a.exports}e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{enumerable:!0,get:i})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,n){if(1&n&&(t=e(t)),8&n)return t;if(4&n&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&n&&"string"!=typeof t)for(var a in t)e.d(i,a,function(n){return t[n]}.bind(null,a));return i},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},e.p="/",e(e.s=2)}([function(t,n,e){"use strict";var i,a=function(){return void 0===i&&(i=Boolean(window&&document&&document.all&&!window.atob)),i},o=function(){var t={};return function(n){if(void 0===t[n]){var e=document.querySelector(n);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(t){e=null}t[n]=e}return t[n]}}(),r=[];function c(t){for(var n=-1,e=0;e<r.length;e++)if(r[e].identifier===t){n=e;break}return n}function s(t,n){for(var e={},i=[],a=0;a<t.length;a++){var o=t[a],s=n.base?o[0]+n.base:o[0],p=e[s]||0,l="".concat(s," ").concat(p);e[s]=p+1;var u=c(l),d={css:o[1],media:o[2],sourceMap:o[3]};-1!==u?(r[u].references++,r[u].updater(d)):r.push({identifier:l,updater:m(d,n),references:1}),i.push(l)}return i}function p(t){var n=document.createElement("style"),i=t.attributes||{};if(void 0===i.nonce){var a=e.nc;a&&(i.nonce=a)}if(Object.keys(i).forEach((function(t){n.setAttribute(t,i[t])})),"function"==typeof t.insert)t.insert(n);else{var r=o(t.insert||"head");if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}return n}var l,u=(l=[],function(t,n){return l[t]=n,l.filter(Boolean).join("\n")});function d(t,n,e,i){var a=e?"":i.media?"@media ".concat(i.media," {").concat(i.css,"}"):i.css;if(t.styleSheet)t.styleSheet.cssText=u(n,a);else{var o=document.createTextNode(a),r=t.childNodes;r[n]&&t.removeChild(r[n]),r.length?t.insertBefore(o,r[n]):t.appendChild(o)}}function h(t,n,e){var i=e.css,a=e.media,o=e.sourceMap;if(a?t.setAttribute("media",a):t.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}var f=null,g=0;function m(t,n){var e,i,a;if(n.singleton){var o=g++;e=f||(f=p(n)),i=d.bind(null,e,o,!1),a=d.bind(null,e,o,!0)}else e=p(n),i=h.bind(null,e,n),a=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)};return i(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap)return;i(t=n)}else a()}}t.exports=function(t,n){(n=n||{}).singleton||"boolean"==typeof n.singleton||(n.singleton=a());var e=s(t=t||[],n);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var i=0;i<e.length;i++){var a=c(e[i]);r[a].references--}for(var o=s(t,n),p=0;p<e.length;p++){var l=c(e[p]);0===r[l].references&&(r[l].updater(),r.splice(l,1))}e=o}}}},function(t,n,e){"use strict";t.exports=function(t){var n=[];return n.toString=function(){return this.map((function(n){var e=function(t,n){var e=t[1]||"",i=t[3];if(!i)return e;if(n&&"function"==typeof btoa){var a=(r=i,c=btoa(unescape(encodeURIComponent(JSON.stringify(r)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(c),"/*# ".concat(s," */")),o=i.sources.map((function(t){return"/*# sourceURL=".concat(i.sourceRoot||"").concat(t," */")}));return[e].concat(o).concat([a]).join("\n")}var r,c,s;return[e].join("\n")}(n,t);return n[2]?"@media ".concat(n[2]," {").concat(e,"}"):e})).join("")},n.i=function(t,e,i){"string"==typeof t&&(t=[[null,t,""]]);var a={};if(i)for(var o=0;o<this.length;o++){var r=this[o][0];null!=r&&(a[r]=!0)}for(var c=0;c<t.length;c++){var s=[].concat(t[c]);i&&a[s[0]]||(e&&(s[2]?s[2]="".concat(e," and ").concat(s[2]):s[2]=e),n.push(s))}},n}},function(t,n,e){t.exports=e(11)},function(t,n,e){var i=e(0),a=e(4);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[t.i,a,""]]);var o={insert:"head",singleton:!1};i(a,o);t.exports=a.locals||{}},function(t,n,e){(n=e(1)(!1)).push([t.i,".campaign-modal-overlay{position:fixed;top:-25%;left:0;bottom:0;right:0;height:125%;background:rgba(0,0,0,0.8);will-change:opacity;display:none;opacity:0;z-index:999998}.campaign-modal{position:fixed;opacity:0;display:none;z-index:999999;background-size:cover;background-repeat:no-repeat;background-position:center}.campaign-privacy-modal{opacity:0;display:none;position:fixed;width:100%;height:100%;left:0;top:0;background:rgba(0,0,0,0.8);z-index:9999991}.campaign-privacy-modal .privacy-dialog{position:absolute;left:50%;top:50%;transform:translate(-50%, -50%);box-shadow:0 24px 38px 3px rgba(0,0,0,0.14),0 9px 46px 8px rgba(0,0,0,0.12),0 11px 15px -7px rgba(0,0,0,0.2);max-width:340px;width:calc(100vw - 32px);overflow:hidden;border-radius:8px;background:#fff;padding:24px}.campaign-privacy-modal .privacy-dialog h5{font-size:18px;font-weight:500;margin-top:8px;margin-bottom:16px}.campaign-privacy-modal .privacy-dialog .describe{font-size:0.875rem}.campaign-privacy-modal .privacy-dialog .describe a:hover{text-decoration:underline}.campaign-privacy-modal .privacy-dialog .action-btn{width:100%;display:-webkit-box;display:-ms-flexbox;display:flex;align-items:center;justify-content:center;margin-top:24px}.campaign-privacy-modal .privacy-dialog .action-btn button,.campaign-privacy-modal .privacy-dialog .action-btn a{display:-webkit-box;display:-ms-flexbox;display:flex;align-items:center;justify-content:center;background-color:#f4f6fb;border:1px solid rgba(0,0,0,0.1);height:42px;border-radius:42px;max-width:134px;min-width:120px;text-decoration:none}.campaign-privacy-modal .privacy-dialog .action-btn button.cancel:hover,.campaign-privacy-modal .privacy-dialog .action-btn a.cancel:hover{color:#2483f2}.campaign-privacy-modal .privacy-dialog .action-btn button.agree,.campaign-privacy-modal .privacy-dialog .action-btn a.agree{background-color:#2483f2;color:#fff;margin-left:24px}\n",""]),t.exports=n},function(t,n,e){var i=e(0),a=e(6);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[t.i,a,""]]);var o={insert:"head",singleton:!1};i(a,o);t.exports=a.locals||{}},function(t,n,e){(n=e(1)(!1)).push([t.i,"@media all and (orientation: landscape) and (max-width: 767px){body{overflow:auto !important}.campaign-modal-overlay,.campaign-modal{display:none !important}}\n",""]),t.exports=n},function(t,n,e){var i=e(0),a=e(8);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[t.i,a,""]]);var o={insert:"head",singleton:!1};i(a,o);t.exports=a.locals||{}},function(t,n,e){(n=e(1)(!1)).push([t.i,'.campaign-layout-1{position:fixed;width:954px;height:558px;left:20px;top:20px;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:flex-end;align-items:center}.campaign-layout-1 .right-box{width:50%;position:relative;right:0;top:0;padding:40px;padding-left:20px}.campaign-layout-1 .right-box>p{text-align:center}.campaign-layout-1 .buttons-area{display:flex;flex-direction:column;justify-content:flex-start;align-items:center;margin-top:40px}.campaign-layout-1 .buttons-area a{position:relative;display:flex;align-items:center;justify-content:flex-start;transition:all 0.35s ease;border-radius:46px;margin-bottom:16px;font-size:16px;text-align:left;min-height:50px;padding:9px 32px 9px 78px}@media (min-width: 1200px){.campaign-layout-1 .buttons-area a{min-width:320px}}.campaign-layout-1 .buttons-area a:last-of-type{margin-bottom:0}.campaign-layout-1 .buttons-area a img{width:32px;height:32px;position:absolute;left:16px;top:50%;display:block;transform:translateY(-50%)}.campaign-layout-1 .buttons-area a[data-title="Messenger"],.campaign-layout-1 .buttons-area a[data-title="Line"]{min-height:64px;padding-top:12px;padding-bottom:12px}.campaign-layout-1 .buttons-area a[data-title="Tawk"]{padding-left:32px;justify-content:center}@media (max-width: 1199.98px){.campaign-layout-1 .buttons-area a{padding:8px 30px 8px 75px;min-height:48px}.campaign-layout-1 .buttons-area a[data-title="Messenger"],.campaign-layout-1 .buttons-area a[data-title="Line"]{padding-top:12px;padding-bottom:12px;min-height:60px}.campaign-layout-1 .buttons-area a img{width:30px;height:30px;left:15px}}@media (max-width: 400px){.campaign-layout-1 .buttons-area a{min-width:100%}}.campaign-layout-1.dark #campaign-layout-1-close-btn::before,.campaign-layout-1.dark #campaign-layout-1-close-btn::after{background:#fff}html[dir="rtl"] .campaign-layout-1 #campaign-layout-1-close-btn,.preview-box.rtl .campaign-layout-1 #campaign-layout-1-close-btn{right:unset;left:0}html[dir="rtl"] .campaign-layout-1 .right-box,.preview-box.rtl .campaign-layout-1 .right-box{left:0;right:unset;padding-right:20px;padding-left:40px}html[dir="rtl"] .campaign-layout-1 .right-box>p,.preview-box.rtl .campaign-layout-1 .right-box>p{text-align:right}html[dir="rtl"] .campaign-layout-1 .buttons-area a,.preview-box.rtl .campaign-layout-1 .buttons-area a{padding-left:32px;padding-right:78px}html[dir="rtl"] .campaign-layout-1 .buttons-area a img,.preview-box.rtl .campaign-layout-1 .buttons-area a img{left:unset;right:16px}@media (max-width: 1199.98px){html[dir="rtl"] .campaign-layout-1 .buttons-area a,.preview-box.rtl .campaign-layout-1 .buttons-area a{padding-right:75px}html[dir="rtl"] .campaign-layout-1 .buttons-area a img,.preview-box.rtl .campaign-layout-1 .buttons-area a img{right:15px}}html[dir="rtl"] .campaign-privacy-modal .privacy-dialog .action-btn button.agree,html[dir="rtl"] .campaign-privacy-modal .privacy-dialog .action-btn a.agree,.preview-box.rtl .campaign-privacy-modal .privacy-dialog .action-btn button.agree,.preview-box.rtl .campaign-privacy-modal .privacy-dialog .action-btn a.agree{margin-right:24px;margin-left:0}#campaign-layout-1-close-btn{position:absolute;right:0;top:0;width:44px;height:44px;z-index:9999}#campaign-layout-1-close-btn::before,#campaign-layout-1-close-btn::after{height:2px;content:"";position:absolute;width:54%;top:24px;left:9px;margin-top:-1px;background:#000;pointer-events:none}#campaign-layout-1-close-btn::before{transform:rotate(45deg)}#campaign-layout-1-close-btn::after{transform:rotate(-45deg)}@media (max-width: 1199.98px){.campaign-layout-1{width:calc(100vw - 10vw);max-width:956px}.campaign-layout-1 .right-box{padding:24px;padding-top:40px}.campaign-layout-1 .buttons-area{margin-top:24px}.campaign-layout-1 .buttons-area button{min-width:unset;width:100%;max-width:320px;margin-bottom:16px;min-height:44px}.campaign-layout-1 .buttons-area button img{width:30px;height:30px}}.tablet-campaign-wrap .campaign-layout-1{width:calc(100vw - 10vw);max-width:956px}.tablet-campaign-wrap .campaign-layout-1 .right-box{padding:24px;padding-top:40px}.tablet-campaign-wrap .campaign-layout-1 .buttons-area{margin-top:24px}.tablet-campaign-wrap .campaign-layout-1 .buttons-area button{min-width:unset;width:100%;max-width:320px;margin-bottom:16px;min-height:44px}.tablet-campaign-wrap .campaign-layout-1 .buttons-area button img{width:30px;height:30px}@media (min-width: 992px) and (max-width: 1199.98px){.campaign-layout-1{width:calc(100vw - 20vw)}}@media (max-width: 767.98px){.campaign-layout-1{width:calc(100vw - 10vw);max-width:956px;height:auto;background-position:top left !important}.campaign-layout-1 .buttons-area{margin-top:16px}.campaign-layout-1 .right-box{width:100%;padding:16px;padding-top:0}.campaign-layout-1 #campaign-layout-1-close-btn{padding:0;background:rgba(0,0,0,0.5);text-align:center}.campaign-layout-1 #campaign-layout-1-close-btn::before,.campaign-layout-1 #campaign-layout-1-close-btn::after{background:#fff}}.mobile-campaign-wrap .campaign-layout-1{width:calc(100vw - 10vw);max-width:956px;height:auto;background-position:top left !important}.mobile-campaign-wrap .campaign-layout-1 .buttons-area{margin-top:16px}.mobile-campaign-wrap .campaign-layout-1 .right-box{width:100%;padding:16px;padding-top:0}.mobile-campaign-wrap .campaign-layout-1 #campaign-layout-1-close-btn{padding:0;background:rgba(0,0,0,0.5);text-align:center}.mobile-campaign-wrap .campaign-layout-1 #campaign-layout-1-close-btn::before,.mobile-campaign-wrap .campaign-layout-1 #campaign-layout-1-close-btn::after{background:#fff}@media (max-width: 340px){.campaign-layout-1 .campaign-layout-1-sign,.campaign-modal .campaign-layout-1-sign{font-size:14px !important;margin-top:-2px;display:block;display:-webkit-box;max-height:148.8px;font-size:14px;line-height:1.3;-webkit-line-clamp:8;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.right-box{padding-bottom:16px !important}.buttons-area{margin-top:12px !important}.buttons-area button{font-size:12px !important}.buttons-area button:nth-of-type(3),.buttons-area button:nth-of-type(4),.buttons-area button:nth-of-type(5){display:none !important}}@media (max-width: 301px){#campaign-layout-1-close-btn{right:0px;top:12px}}\n',""]),t.exports=n},function(t,n,e){var i=e(0),a=e(10);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[t.i,a,""]]);var o={insert:"head",singleton:!1};i(a,o);t.exports=a.locals||{}},function(t,n,e){(n=e(1)(!1)).push([t.i,'.campaign-layout-2{width:954px}.campaign-layout-2 img{display:block;width:100%}.campaign-layout-2 .campaign-layout-2-close-btn{position:absolute;right:0;top:0;width:60px;height:60px;z-index:2;opacity:0;cursor:pointer}@media (max-width: 1199.98px){.campaign-layout-2{width:calc(100vw - 10vw);max-width:956px}}.tablet-campaign-wrap .campaign-layout-2{width:calc(100vw - 10vw);max-width:956px}@media (min-width: 992px) and (max-width: 1199.98px){.campaign-layout-2{width:calc(100vw - 20vw)}}@media (max-width: 767.98px){.campaign-layout-2{width:calc(100vw - 10vw);max-width:956px}}.mobile-campaign-wrap .campaign-layout-2{width:calc(100vw - 10vw);max-width:956px}html[dir="rtl"] .campaign-layout-2-close-btn{right:unset;left:0}\n',""]),t.exports=n},function(t,n,e){"use strict";e.r(n);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var i=function(t,n){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])})(t,n)};function a(t,n){function e(){this.constructor=t}i(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}function o(t,n,e,i){return new(e||(e=Promise))((function(a,o){function r(t){try{s(i.next(t))}catch(t){o(t)}}function c(t){try{s(i.throw(t))}catch(t){o(t)}}function s(t){var n;t.done?a(t.value):(n=t.value,n instanceof e?n:new e((function(t){t(n)}))).then(r,c)}s((i=i.apply(t,n||[])).next())}))}function r(t,n){var e,i,a,o,r={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(e)throw new TypeError("Generator is already executing.");for(;r;)try{if(e=1,i&&(a=2&o[0]?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(!(a=r.trys,(a=a.length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){r=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(6===o[0]&&r.label<a[1]){r.label=a[1],a=o;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(o);break}a[2]&&r.ops.pop(),r.trys.pop();continue}o=n.call(t,r)}catch(t){o=[6,t],i=0}finally{e=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}var c=function(){return 5===window.location.protocol.length},s=function(){return c()?(d("检测为开发环境, 使用json-server数据"),"http://localhost:8189/data"):!!window.location.pathname.match(/^\/(ru|it|fr|es|de)\//)?"/"+window.location.pathname.match(/^\/(ru|it|fr|es|de)\//)[1]+"/wp-admin/admin-ajax.php":"/wp-admin/admin-ajax.php"},p=function(t,n){if("localStorage"in window)try{window.localStorage.setItem(t,n)}catch(t){console.log(t)}},l=function(t){if("localStorage"in window)try{return window.localStorage.getItem(t)}catch(t){console.log(t)}},u=function(){return Math.ceil((new Date).getTime()/1e3)},d=function(t){console.log("campaign: "+t)},h=function(){return Math.ceil(1e7*Math.random())},f=function(t){return new Promise((function(n,e){var i=new Image;i.onload=function(){n({width:i.width,height:i.height})},i.onerror=function(t){return e(t)},i.src=t}))},g=function(){var t=new URLSearchParams(window.location.search),n={referrer:y()||[],postSource:t.has("source")||t.has("utm_source")?t.get("source")||t.get("utm_source"):t.has("gclid")?"gclid":t.has("fbclid")?"fbclid":[],postNumber:t.has("num")?t.get("num"):[]};return $.param(n,!0)},m=function(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,n,e,i){return n+n+e+e+i+i}));var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return n?parseInt(n[1],16)+","+parseInt(n[2],16)+","+parseInt(n[3],16):""},y=function(){var t=document.referrer,n="";if(""===t)return"";var e={google:"google",youtube:"youtube",facebook:"facebook","t.co":"twitter","vk.":"vk","ok.":"ok"};for(var i in e){if(t.indexOf(i)>-1){n=e[i];break}var a=t.match(/^https?\:\/\/([^\/?#]+)(?:[\/?#]|$)/i);n=a&&a[1]}return n},b=$("<div/>"),w=function(){function t(){this.prefix="campaign"}return t.prototype.on=function(t,n){b.on(t,n)},t.prototype.one=function(t,n){b.one(t,n)},t.prototype.off=function(t){b.off(t)},t.prototype.emit=function(t,n){void 0===n&&(n=[]),b.trigger(t,n)},t}(),x=function(t){function n(){return null!==t&&t.apply(this,arguments)||this}return a(n,t),n.prototype.condition_check=function(){return void 0!==window.$},n.prototype.set_timeout_for_show=function(t){return new Promise((function(n,e){"NaN"===t.toString()&&e("condition.data 参数错误, data:"+t),setTimeout((function(){return n()}),1e3*t)}))},n.prototype.set_scroller_watcher_for_show=function(t){var n=this;return new Promise((function(e,i){("NaN"===t.toString()||t>100||t<1)&&i("condition.data 参数错误, data:"+t);var a="scroll."+n.prefix,o=document.body.scrollHeight;$(window).on(a,(function(){var n=$(window).scrollTop(),i=$(window).height();Math.trunc((n+i)/o*100)>t&&($(window).off(a),e())})).trigger(a)}))},n.prototype.user_ready_to_leave=function(){var t="user-leave",n=null;return new Promise((function(e){$(document).on("mouseleave."+t,(function(i){i.clientY>20||(n=setTimeout((function(){$(document).off("mouseleave."+t).off("mouseenter."+t),e()}),300))})).on("mouseenter."+t,(function(){return clearInterval(n)}))}))},n.prototype.show_condition_check=function(t){var n=this;return new Promise((function(e,i){var a=Object.keys(t);~a.indexOf("type")&&~a.indexOf("data")?1===t.type?n.set_timeout_for_show(parseInt(t.data)).then((function(){return e()}),(function(t){return i(t)})):2===t.type?n.set_scroller_watcher_for_show(t.data).then((function(){return e()}),(function(t){return i(t)})):i("错误的显示条件类型 type: "+t.type):i("how condition错误, "+JSON.stringify(t))}))},n.prototype.reshow_condition_check=function(t){var n=l(this.prefix);if(null===n||0===n.length)return this.set_first_time_show_up_storage(),!0;n=JSON.parse(n);var e=Object.keys(n);return~e.indexOf("currentCount")&&~e.indexOf("lastTimestamp")?!(parseInt(n.currentCount)>=t.count)||(c()?(d("开发环境, 跳过reshow判断, 当前count为:"+n.currentCount),!0):u()-parseInt(n.lastTimestamp)>3600*t.data?c()?(d("开发环境, 跳过reshow判断, 当前时间戳差值为:"+(u()-parseInt(n.lastTimestamp))),!0):(0===parseInt(n.lastTimestamp)||this.set_first_time_show_up_storage(),!0):!!c()&&(d("开发环境, 跳过reshow判断, 当前时间戳差值为:"+(u()-parseInt(n.lastTimestamp))),!0)):(this.set_first_time_show_up_storage(),!0)},n.prototype.set_first_time_show_up_storage=function(){p(this.prefix,JSON.stringify({currentCount:0,lastTimestamp:0}))},n}(w),v="beforeShow",_="afterShow",k="beforeHide",P="afterHide",O=function(t){function n(n){var e=t.call(this)||this;return e.$eventEl=$("<div />"),e.isShown=!1,e.$el=$(n),e.$el.addClass("campaign-modal"),e.event_handle(),e}return a(n,t),n.prototype.show=function(){var t=this;this.hide_existing_modal(),this.show_overlay(),this.show_modal(),$(".campaign-modal-overlay").on("click",(function(){return t.hide()}))},n.prototype.hide=function(){var t=this;this.$eventEl.trigger(k),this.$el.animate({opacity:0},450,(function(){t.$el.css({display:"none"}),t.$eventEl.trigger(P),$(".campaign-modal-overlay,.campaign-privacy-modal,.campaign-modal").remove()})),$(".campaign-modal-overlay").animate({opacity:0},450,(function(){$(".campaign-modal-overlay").remove()})),this.isShown=!1,$(document.body).css({overflow:""})},n.prototype.event_handle=function(){var t=this;$(window).on("resize.campaign-modal",(function(){t.calc_modal_position()})),$(window).on("resize",(function(){t.isShown&&(window.innerWidth>=575&&window.innerWidth<768?$(document.body).css({overflow:""}):$(document.body).css({overflow:"hidden"}))}))},n.prototype.show_modal=function(){var t=this;this.calc_modal_position(),this.$eventEl.trigger(v),this.$el.animate({opacity:1},600,(function(){return t.$eventEl.trigger(_)})),this.isShown=!0,$(document.body).css({overflow:"hidden"}),$(window).trigger("campaign-modal-show")},n.prototype.calc_modal_position=function(){var t=this;this.$el.css({display:"flex"}).offset(),this.$el.css("opacity",0),this.set_position(),setTimeout((function(){t.set_position(),t.$el.css("opacity",1)}),120)},n.prototype.set_position=function(){var t=this.$el.outerHeight(),n=this.$el.outerWidth();this.$el.css({top:($(window).height()-t)/2,left:($(window).width()-n)/2})},n.prototype.show_overlay=function(){var t=$("<div/>");$(document.body).append(t),t.addClass("campaign-modal-overlay").css({display:"block"}).animate({opacity:1},600)},n.prototype.hide_existing_modal=function(){$(".campaign-modal").css({display:"none",opacity:0}),$(".campaign-modal-overlay").remove()},n.prototype.on=function(t,n){return this.$eventEl.on(t,n),this},n.prototype.one=function(t,n){return this.$eventEl.one(t,n),this},n.prototype.off=function(t){return this.$eventEl.off(t),this},n}(w),S=0==document.createElement("canvas").toDataURL("image/webp").indexOf("data:image/webp"),j=function(t){function n(n){var e=t.call(this)||this;return e.data=n,e.backgrounds={pc:"",mobile:"",tablet:""},e}return a(n,t),n.prototype.generator_style=function(t,n){var e="";return e="#"+t+"{"+this.format_style_obj(n)+"}",n.hover&&(e+="#"+t+":hover{"+this.format_style_obj(n.hover)+"}"),n.active&&(e+="#"+t+":active{"+this.format_style_obj(n.active)+"}"),e},n.prototype.generator_responsive_style=function(t,n){var e=this,i="";return Object.keys(n).map((function(a){switch(a){case"mobile":i+="@media(max-width:767px){#"+t+"{"+e.format_style_obj(n[a])+"}}";break;case"tablet":i+="@media(max-width:1199px){#"+t+"{"+e.format_style_obj(n[a])+"}}";break;case"pc":i+="#"+t+"{"+e.format_style_obj(n[a])+"}"}})),i},n.prototype.format_style_obj=function(t){return $("<div />").css(t).attr("style")},n.prototype.get_social_name_from_link=function(t){var n="";return~t.indexOf("m.me")?n="Messenger":~t.indexOf("whatsapp")?n="WhatsApp":~t.indexOf("tawk.to")?n="Tawk":~t.indexOf("line.me")?n="Line":~t.indexOf("kakao")&&(n="Kakao"),""+n},n.prototype.get_webp_by_link=function(t){return o(this,void 0,void 0,(function(){var n;return r(this,(function(e){return n=t.replace("/wp-content/uploads/","/wp-content/uploads-webpc/uploads/")+".webp",[2,new Promise((function(e){$.ajax({url:n,type:"HEAD"}).then((function(){e(n)}),(function(){e(t)}))}))]}))}))},n.prototype.get_backgrounds=function(t){return o(this,void 0,void 0,(function(){var n,e,i,a,o;return r(this,(function(r){switch(r.label){case 0:if(n=Object.assign({},t),!S)return[3,4];e=Object.keys(t),i=0,r.label=1;case 1:return i<e.length?(a=n,o=e[i],[4,this.get_webp_by_link(t[e[i]])]):[3,4];case 2:a[o]=r.sent(),r.label=3;case 3:return i++,[3,1];case 4:return[2,n]}}))}))},n}(w),M=function(t){function n(n){var e=t.call(this,n)||this;return e.style="",e.layoutPrefix=e.prefix+"-layout-1",e.M=null,e.data=n,e.init(),e}return a(n,t),n.prototype.init=function(){return o(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,this.detect_webp_exist()];case 1:return t.sent(),this.render(),this.create_modal(),this.style_inject(),this.background_image_handle(),this.bind_event(),[2]}}))}))},n.prototype.detect_webp_exist=function(){return o(this,void 0,void 0,(function(){var t;return r(this,(function(n){switch(n.label){case 0:return t=this,[4,this.get_backgrounds(this.data.backgrounds)];case 1:return t.backgrounds=n.sent(),[2]}}))}))},n.prototype.style_inject=function(){var t=this,n={};Object.keys(this.backgrounds).map((function(e){return n[e]={backgroundImage:'url("'+t.backgrounds[e]+'")'}})),this.style+=this.generator_responsive_style(this.layoutPrefix,n),$(document.body).append("<style>"+this.style+"</style>")},n.prototype.create_modal=function(){this.M=new O($("."+this.layoutPrefix))},n.prototype.bind_event=function(){var t=this;$("#campaign-layout-1-close-btn").on("click tap",(function(){return t.hide()})),$(window).on("resize",(function(){t.set_mobile_right_box_top(),t.set_tablet_height()})).trigger("resize"),this.M.on("beforeHide",(function(){var n=l(t.prefix);n=JSON.parse(n),p(t.prefix,JSON.stringify({currentCount:parseInt(n.currentCount)+1,lastTimestamp:u()}))}))},n.prototype.set_tablet_height=function(){var t=.5849*$("."+this.layoutPrefix).outerWidth();768<=window.innerWidth&&window.innerWidth<1200?$("."+this.layoutPrefix+" ").css("height",t):$("."+this.layoutPrefix+" ").css("height","")},n.prototype.set_mobile_right_box_top=function(){var t=300*$("."+this.layoutPrefix).outerWidth()/593+32;window.innerWidth<768?$("."+this.layoutPrefix+" .right-box").css("margin-top",t):$("."+this.layoutPrefix+" .right-box").css("margin-top","")},n.prototype.background_image_handle=function(){var t=this,n=$(window).width(),e=this.backgrounds.pc;n<1200&&this.backgrounds.tablet&&(e=this.backgrounds.tablet),n<768&&(e=this.backgrounds.mobile),f(e).then((function(){return t.show()}))},n.prototype.show=function(){this.M.show()},n.prototype.hide=function(){this.M.hide()},n.prototype.render=function(){var t="sign-"+h(),n='<section class="'+this.layoutPrefix+" "+(this.data.isLight?"light":"dark")+'" id="'+this.layoutPrefix+'"><div class="right-box"><p class="'+this.layoutPrefix+'-sign" id="'+t+'">'+this.data.sign.text+'</p><div class="buttons-area"><span>'+this.render_buttons_html()+'</span></div></div><button id="'+this.layoutPrefix+'-close-btn"></button></section>';this.style+=this.generator_responsive_style(t,this.data.sign.responses),$(document.body).append(n)},n.prototype.render_buttons_html=function(){var t=this,n="";return Object.values(this.data.buttons).map((function(e){var i="button-"+h();t.style+=t.generator_responsive_style(i,e.responses),t.style+=t.generator_style(i,{backgroundColor:e.backgroundColor,color:e.color,hover:{backgroundColor:e.backgroundColorHover,boxShadow:"0 5px 10px rgba("+m(e.backgroundColor)+",0.2)"}});var a=e.icon.length>0?'<img src="'+e.icon+'">':"";n+='<a class="'+t.prefix+'-button" target="_blank" data-title="'+t.get_social_name_from_link(e.link)+'" href="'+e.link+'" id="'+i+'" data-is-privacy="'+!!e.isPrivacy+'">'+a+e.text+"</a>"})),n},n}(j),C=$("<div/>"),T=function(t){function n(n){var e=t.call(this)||this;return e.data=null,e.$eventEl=$("<div/>"),e.data=n,e.init(),e}return a(n,t),n.prototype.init=function(){this.generator_html(),this.event_handle()},n.prototype.show=function(t,n){return new Promise((function(e,i){C.one("hide",(function(t,n){n?e():i()}));var a=$(".campaign-privacy-modal");a.find(".agree").get(0).dataset.title=t,a.show().animate({opacity:1},300);var o=a.find(".agree");o.attr("href",n),o.get(0).dataset.fullLink=n}))},n.prototype.hide=function(t){void 0===t&&(t=!1);var n=$(".campaign-privacy-modal");$(".campaign-privacy-modal").animate({opacity:0},250,(function(){n.hide(),C.trigger("hide",[t])}))},n.prototype.event_handle=function(){var t=this,n=$(".campaign-privacy-modal");n.on("click",(function(n){0!==$(n.target).parents(".privacy-dialog").length||n.target.classList.contains("privacy-dialog")||t.hide(!1)})),n.find(".cancel").on("click",(function(){return t.hide(!1)})),n.find(".agree").on("click",(function(){return t.hide(!0)}))},n.prototype.generator_html=function(){var t='<section class="'+this.prefix+'-privacy-modal"><div class="privacy-dialog">\n                    <h5>'+this.data.title+'</h5>\n                    <p class="describe">'+this.format_describe(this.data.describe,this.data.link)+'</p>\n                    <div class="action-btn">\n                      <button class="cancel">'+this.data.cancel+'</button>\n                      <a target="_blank" href="javascript:;" class="agree">'+this.data.agree+"</a>\n                    </div>\n                </div></section>";$(document.body).append(t)},n.prototype.format_describe=function(t,n){return t.replace(/\*\*(.*?)\*\*/gi,'<a href="'+n+'" target="_blank">$1</a>')},n}(w),I=function(t){function n(n){var e=t.call(this,n)||this;return e.M=null,e.layoutPrefix=e.prefix+"-layout-2",e.init(),e}return a(n,t),n.prototype.init=function(){return o(this,void 0,void 0,(function(){return r(this,(function(t){switch(t.label){case 0:return[4,this.detect_webp_exist()];case 1:return t.sent(),this.render(),this.create_modal(),this.style_inject(),this.background_image_handle(),this.bind_event(),[2]}}))}))},n.prototype.detect_webp_exist=function(){return o(this,void 0,void 0,(function(){var t;return r(this,(function(n){switch(n.label){case 0:return t=this,[4,this.get_backgrounds(this.data.backgrounds)];case 1:return t.backgrounds=n.sent(),[2]}}))}))},n.prototype.render=function(){var t=this.backgrounds.mobile||this.backgrounds.pc,n='<section class="'+this.layoutPrefix+'" id="'+this.layoutPrefix+'">\n      <a class="campaign-button" target="_blank" data-title="'+this.get_social_name_from_link(this.data.clickLink)+'" href="'+this.data.clickLink+'" data-is-privacy="'+this.data.isPrivacy+'">\n        <picture>\n          <source media="(min-width: 768px)" srcset="'+this.backgrounds.pc+'">\n          <img src="'+t+'" />\n        </picture>\n      </a>\n      <button class="'+this.layoutPrefix+'-close-btn"></button>\n    </section>';$(document.body).append(n)},n.prototype.set_tablet_height=function(){var t=.5849*$("."+this.layoutPrefix).outerWidth();768<=window.innerWidth&&window.innerWidth<1200?$("."+this.layoutPrefix+" ").css("height",t):$("."+this.layoutPrefix+" ").css("height","")},n.prototype.set_mobile_right_box_top=function(){var t=300*$("."+this.layoutPrefix).outerWidth()/593+32;window.innerWidth<768?$("."+this.layoutPrefix+" .right-box").css("margin-top",t):$("."+this.layoutPrefix+" .right-box").css("margin-top","")},n.prototype.bind_event=function(){var t=this;$("."+this.layoutPrefix+"-close-btn").on("click",(function(n){return t.hide()})),$(window).on("resize",(function(){t.set_mobile_right_box_top(),t.set_tablet_height()})).trigger("resize"),this.M.on("beforeHide",(function(){window.parent.postMessage({sentinel:"amp",type:"embed-size",height:120,width:120},"*");var n=l(t.prefix);n&&(n=JSON.parse(n),p(t.prefix,JSON.stringify({currentCount:parseInt(n.currentCount)+1,lastTimestamp:u()})))}))},n.prototype.style_inject=function(){},n.prototype.create_modal=function(){this.M=new O($("."+this.layoutPrefix))},n.prototype.show=function(){this.M.show()},n.prototype.hide=function(){this.M.hide()},n.prototype.background_image_handle=function(){var t=this,n=$(window).width(),e=this.backgrounds.pc;n<768&&(e=this.backgrounds.mobile),f(e).then((function(){return t.show()}))},n}(j),N=function(t){function n(){var n=t.call(this)||this;return n.data=null,n.Condition=new x,n.isShowed=!1,n.startTime=u(),n.P=null,n.init(),n}return a(n,t),n.prototype.init=function(){var t=this;this.Condition.condition_check()?new Promise((function(t){c()?$.get(s()).then((function(n){return t(n.data)})):$.post(s(),{action:"gp_home_ajax",page_name:"page-whole",page_method:"get_campaign_data",page_link:window.location.origin+window.location.pathname}).then((function(n){n&&n.length>0?(n=JSON.parse(n)).isOpen?t(n.data):d("后台未启用该弹框"):d("后台未返回数据")}))})).then((function(n){t.data=n,t.Condition.reshow_condition_check(n.conditionForReshow)?t.Condition.show_condition_check(n.condition).then((function(){return t.show()}),(function(t){return d(t)})):d("不符合再次显示条件")})):d("不符合运行条件")},n.prototype.show=function(){this.isShowed||(this.myMMFontHandler(),this.isShowed=!0,this.render_layout(this.data.layout),this.P=new T(this.data.privacyData),this.event_handle(),$(document.body).append("<style>"+this.data.customStyle+"</style>"))},n.prototype.myMMFontHandler=function(){"my-MM"===document.documentElement.lang&&document.body.classList.contains("zawgyi")&&window.uni2zg&&(this.data=JSON.parse(window.uni2zg(JSON.stringify(this.data))))},n.prototype.event_handle=function(){var t=this;$(window).on("campaign-modal-show",(function(){$(".campaign-modal .campaign-button").on("mouseenter",(function(n){var e=n.currentTarget,i=t.get_open_link(e.getAttribute("href"));e.setAttribute("href",i),e.dataset.fullLink=i}))})),$(document).on("click",".campaign-button",(function(n){var e=n.currentTarget.href;"false"!==n.currentTarget.dataset.isPrivacy&&(l("privacyConfirm")||(n.preventDefault(),t.P.show(n.currentTarget.dataset.title,e).then((function(){p("privacyConfirm","1")}),(function(){d("用户取消了隐私权政策显示")}))))}))},n.prototype.open_link=function(t){window.open(t,"_blank")},n.prototype.get_open_link=function(t){return t=~t.indexOf(window.location.hostname)?t.replace(/\d\d%3A\d\d%3A\d\d/,""+encodeURIComponent(this.get_loaded_time())):this.format_messenger_link(t)},n.prototype.format_messenger_link=function(t){var n=window.location.host+window.location.pathname,e=function(t){var n="";return~t.indexOf("?")&&(n=t.split("?")[1]),n?JSON.parse('{"'+decodeURI(n).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}'):{}}(t),i=g()?"&"+g():"",a=e.ref?e.ref:"website",o="trigger="+this.data.type+"&timeOnPage="+this.get_loaded_time()+i+"&landingPage="+n;return e.ref=a+"--"+o,t=t.split("?")[0],t+="?"+$.param(e)},n.prototype.get_loaded_time=function(){return t=u()-this.startTime,(n=new Date(0)).setSeconds(t),n.toISOString().substr(11,8);var t,n},n.prototype.render_layout=function(t){switch(t.type){case 1:new M(t);break;case 2:new I(t);break;default:d("未知的布局 type:"+t.type)}},n}(w);e(3),e(5),e(7),e(9);$(".campaign-panel-back").length>0||new N}]);