!function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i(i.s=0)}([function(t,e,i){t.exports=i(3)},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);i(1),i(2);function n(t,e,i,n){return new(i||(i=Promise))((function(s,a){function r(t){try{l(n.next(t))}catch(t){a(t)}}function o(t){try{l(n.throw(t))}catch(t){a(t)}}function l(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,o)}l((n=n.apply(t,e||[])).next())}))}function s(t,e){var i,n,s,a,r={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function o(a){return function(o){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(s=2&a[0]?n.return:a[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,a[1])).done)return s;switch(n=0,s&&(a=[2&a[0],s.value]),a[0]){case 0:case 1:s=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(s=r.trys,(s=s.length>0&&s[s.length-1])||6!==a[0]&&2!==a[0])){r=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){r.label=a[1];break}if(6===a[0]&&r.label<s[1]){r.label=s[1],s=a;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(a);break}s[2]&&r.ops.pop(),r.trys.pop();continue}a=e.call(t,r)}catch(t){a=[6,t],n=0}finally{i=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,o])}}}var a=function(t,e){return new Promise((function(i,a){return n(void 0,void 0,void 0,(function(){return s(this,(function(n){return $.ajax({type:"post",url:ghAjax.ajaxurl,dataType:"json",data:{security:ghAjax.security,number:10,category_id:t,offset:e,action:"gh_image_posts"}}).then((function(t){i(t)})),[2]}))}))}))},r=function(t){return void 0===t&&(t=300),new Promise((function(e){window.setTimeout((function(){e()}),t)}))},o=function(t){var e=t.data("src")?t.data("src"):t.attr("src");return new Promise((function(i,n){if(e){var s=new Image;s.onload=function(){(s.height<s.width-20||s.height>s.width+40)&&t.closest("a").addClass("radius"),i(s)},s.onerror=function(){n(new Error("Could not load image at "+e))},s.src=e}}))},l=function(t){var e="";return t.forEach((function(t){var i,n;e+='<div class="card-item" data-key="'+t.index+'">\n            <div class="img-post-card d-lg-flex">\n              <div class="img-post-image">\n                <a href="javascript:;" style="padding-top:'+100*(t.height/t.width).toFixed(2)+'%;">\n                  <img class="lazy" data-src="'+t.image+'" alt="'+t.alt+'" />\n                </a>\n              </div>\n              <div class="img-post-info">\n                <div class="nano">\n                  <div class="nano-content">\n                    <h1>'+t.post_title+'</h1>\n                    <div class="img-post-likes d-flex">\n                      <button class="v-share btn-icon btn-float trigger-share-btn" data-title="'+t.post_title+'" data-url="'+t.link+'"><i class="icon-share"></i></button>\n                      <button class="favorite d-flex" data-post-id="'+t.ID+'"><i class="icon-favorite"></i><span>'+t.likes+'</span> </button>\n                    </div>\n                    <div class="description the-post-cont">\n                      <p>'+t.post_content+'</p>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <script type="text/tpl" class="tags-tpl d-none">'+(t.tags.length?(i=t.tags,n="",i.map((function(t,e){n+='<a href="'+t.link+'" class="btn-tags">'+t.name+"</a>\t"})),n):"")+"<\/script>\n        </div>"})),e},c=!1,u=function(){function t(){this.slideCount=0,this.$imagesCarousel=$(".images-carousel"),this.$relatedTags=$(".related-tags"),this.init()}return t.prototype.init=function(){window.slickCarousel(".article-list",4,4),this.images_carousel_slick(),this.img_post_info_nano()},t.prototype.images_carousel_slick=function(){var t=this,e=0,i=this.$imagesCarousel.data("current"),n=this.$imagesCarousel.data("category"),s=this.$imagesCarousel.data("count");this.$imagesCarousel.find(".card-item").map((function(t,n){i===$(n).data("key")&&(e=$(n).index())})),this.create_tags(e-1),this.$imagesCarousel.slick({infinite:!1,slidesToShow:1,adaptiveHeight:!0,speed:200,dots:!1,arrows:!0,rows:0,draggable:!1,pauseOnFocus:!1,responsive:[]}).slick("slickGoTo",e),setTimeout((function(){t.$imagesCarousel.removeClass("ready")}),120),o($(".card-item.slick-current").find("img")),this.slick_before_change_callback(n,s)},t.prototype.slick_before_change_callback=function(t,e){var i=this,n="";this.$imagesCarousel.on("beforeChange",(function(s,a,r,l){if(i.slideCount=a.slideCount,"right"===(n=1==Math.abs(l-r)?l-r>0?"right":"left":l-r>0?"left":"right")){if(a.slideCount-l==3&&!c){var u=a.$slides.eq(a.slideCount-1).data("key");if(u+5>e)return;i.slick_before_change(t,u,n),c=!0}}else if("left"===n&&3===r&&!c){var d=a.$slides.eq(0).data("key");if(d<5)return;i.slick_before_change(t,d-10,n),c=!0}var f=function(t){var e=t.find(".img-post-image img");e.data("src")&&e.attr("src",e.data("src")).addClass("loaded")};f(a.$slides.eq(l+1)),f(a.$slides.eq(l)),f(a.$slides.eq(l-1));var h,g,p=a.$slides.eq(l).find("img");p.hasClass("radius")||o(p),h=a.$slides.eq(l).data("key"),g=a.$slides.eq(l).find(".v-share").data("url"),window.history.replaceState({index:h},"",g),i.img_post_info_nano(),i.create_tags(l)}))},t.prototype.img_post_info_nano=function(){this.$imagesCarousel.find(".nano").nanoScroller({preventPageScrolling:!0})},t.prototype.create_tags=function(t){var e=this.$imagesCarousel.find(".card-item").eq(t).find(".tags-tpl").html();e&&""!==e.trim()?(this.$relatedTags.find(".tags-list").html(e),this.$relatedTags.removeClass("d-none").fadeIn()):this.$relatedTags.addClass("d-none")},t.prototype.slick_before_change=function(t,e,i){return n(this,void 0,void 0,(function(){var n,o;return s(this,(function(s){switch(s.label){case 0:return this.$imagesCarousel.find("button,.slick-list").css({opacity:0,visibility:"hidden"}),this.$imagesCarousel.after('<div class="spinner-border" role="status"></div>').addClass("arrow-hidden"),[4,a(t,e)];case 1:return n=s.sent(),o=l(n.data),"right"===i?this.slick_add_slider(o,!0):"left"===i&&this.slick_add_slider(o,!1),[4,r(80)];case 2:return s.sent(),c=!1,window.LazyLoad.update(),[2]}}))}))},t.prototype.slick_add_slider=function(t,e){var i=this,a=this.$imagesCarousel.find(".slick-slide"),o=this.$imagesCarousel.find(".slick-track"),l=function(t){return n(i,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,r(160)];case 1:return e.sent(),this.$imagesCarousel.slick("slickGoTo",t),this.$imagesCarousel.siblings(".spinner-border").remove(),[4,r(420)];case 2:return e.sent(),this.$imagesCarousel.find("button,.slick-list").css({opacity:"",visibility:""}),[4,r(520)];case 3:return e.sent(),this.$imagesCarousel.removeClass("arrow-hidden"),[2]}}))}))};if(e){for(var c=0;c<this.slideCount-6;c++)a.eq(c).remove();this.$imagesCarousel.slick("slickAdd",t),l(3)}else{for(c=6;c<this.slideCount;c++)a.eq(c).remove();o.prepend(t),this.$imagesCarousel.slick("slickAdd",null),l(this.$imagesCarousel.find(".slick-slide").length-4)}},t}(),d=function(){function t(){this.init()}return t.prototype.init=function(){$("body").on("click",".img-post-likes .favorite",(function(t){var e,i=Number($(t.currentTarget).find("span").html().replace(/\,/g,""));$(t.currentTarget).addClass("like"),$(t.currentTarget).find("span").html(String(i+1).replace(/(.)(?=(\d{3})+$)/g,"$1,")),e=$(t.currentTarget).data("post-id"),$.ajax({type:"post",url:ghAjax.ajaxurl,dataType:"json",data:{security:ghAjax.security,action:"gh_ajax_likes_count",ID:e}}),$(t.currentTarget).on("click",(function(){return!1}))}))},t}();new u,new d}]);